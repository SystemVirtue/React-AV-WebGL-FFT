!function e(t,n,o){function a(r,l){if(!n[r]){if(!t[r]){var d="function"==typeof require&&require;if(!l&&d)return d(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[r]={exports:{}};t[r][0].call(s.exports,function(e){var n=t[r][1][e];return a(n?n:e)},s,s.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(e,t,n){var o={trimStart:0,trimEnd:0},a=function(t,n){"use strict";var i=n,r=n,l=n,d=n,c=-1!==t.location.hash.indexOf("#debug"),l=n,s=n,u=n,m=[0,0,0],f=n,p={LoadingState:n,PlayState:n,LoadSceneState:n},v=function(t){t=t||{},f=t.Utils||e("./Utils.js"),p.LoadingState=t.LoadingState||e("./LoadingState.js"),p.PlayState=t.PlayState||e("./PlayState.js"),p.LoadSceneState=t.LoadSceneState||e("./LoadSceneState.js"),c&&x(),g(),y(),h(this),S(),b(p.LoadingState)},g=function(){if(t.AudioContext=t.AudioContext||t.webkitAudioContext||t.mozAudioContext||t.msAudioContext,r=new AudioContext,s=r.createScriptProcessor(2048,1,1),s.connect(r.destination),u=r.createAnalyser(),u.smoothingTimeConstant=.8,u.fftSize=1024,l=r.createBufferSource(),l.connect(u),u.connect(s),l.connect(r.destination),c){var e=document.getElementById("FFTContainer"),n=e.width,a=e.height,i=e.getContext("2d"),d=i.createLinearGradient(0,0,0,a);d.addColorStop(1,"#000000"),d.addColorStop(.75,"#ff0000"),d.addColorStop(.25,"#ffff00"),d.addColorStop(0,"#ffffff")}s.onaudioprocess=function(){var e=new Uint8Array(u.frequencyBinCount);if(u.getByteFrequencyData(e),c){i.clearRect(0,0,n,a),i.fillStyle=d;for(var t=e.length,r=Math.round(n/t),l=0;t>l;l++)l>=o.trimStart&&l<=o.trimEnd&&i.fillRect(l*r,a-e[l],r,a)}m=[e[4],e[194],e[202]]}},y=function(){t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame,t.cancelAnimationFrame=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.msCancelAnimationFrame},h=function(e){p.LoadingState.initialize(e,{Utils:f}),p.PlayState.initialize(e,{Utils:f}),p.LoadSceneState.initialize(e,{Utils:f})},S=function(){var e=document.getElementById("trackCoverLink");e.addEventListener("click",function(e){f.preventDefaultEvent(e),ga("send","event","Button","Click","Album Art")});var t=document.getElementById("trackArtistLink");t.addEventListener("click",function(e){f.preventDefaultEvent(e),ga("send","event","Button","Click","Artist")});var n=document.getElementById("githubLink");n.addEventListener("click",function(e){ga("send","event","Button","Click","GitHub")});var o=document.getElementById("aboutLink");o.addEventListener("click",function(e){f.preventDefaultEvent(e);var t=document.getElementById("aboutModal");f.removeCSSClass(t,"hidden"),ga("send","event","Button","Click","About Modal");var n=document.getElementById("aboutModalClose");n.addEventListener("click",function(e){f.preventDefaultEvent(e),f.addCSSClass(t,"hidden")})})},x=function(){f.asyncLoadScript("https://rawgit.com/mrdoob/stats.js/master/build/stats.min.js",function(){w()}),f.asyncLoadScript("https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js",function(){E()})},E=function(){var e={playSound:function(){a.playAudio()},trimStart:0,trimEnd:350};d=new dat.GUI({autoPlace:!1}),d.add(e,"playSound").name("Play Sound"),d.add(e,"trimStart",0,512,1).onChange(function(e){console.log("Trim Start",e),o.trimStart=e}),d.add(e,"trimEnd",0,512,1).onChange(function(e){console.log("Trim End",e),o.trimEnd=e});var t=document.getElementById("GUIContainer");t.appendChild(d.domElement)},w=function(){var e=new Stats;e.setMode(0),e.domElement.style.cssText="position:fixed; left:5px; top:5px; z-index:10000;",document.body.appendChild(e.domElement);var t=new Stats;t.setMode(1),t.domElement.style.cssText="position:fixed; left:85px; top:5px; z-index:10000;",document.body.appendChild(t.domElement);var n=new Stats;n.setMode(2),n.domElement.style.cssText="position:fixed; left:170px; top:5px; z-index:10000;",document.body.appendChild(n.domElement),requestAnimationFrame(function o(){e.update(),t.update(),n.update(),requestAnimationFrame(o)})},b=function(e){i!==e&&(i!==n&&i.exit(),i=e,i!==n&&(i.enter(),i.execute()))},C=function(){return r},L=function(e){l&&(l.buffer&&l.stop(0),l.buffer=e)},A=function(){if(l){var e=document.getElementById("trackInfo");f.removeCSSClass(e,"hidden"),l.start(0)}},T=function(){l&&l.stop(0)},k=function(){return m},M=function(e){var t=e.title,n=e.artwork_url,o=e.permalink_url,a=e.user.permalink_url,i="Self-titled (2013)",r="Boundary",l=o.replace("http://","https://");"https://soundcloud.com/boundarysound/boundary-abidjan"===l?t="Abidjan":"https://soundcloud.com/boundarysound/boundary-double-edged-sword"===l&&(t="Double-Edged Sword"),document.getElementById("trackArtist").textContent=r,document.getElementById("trackTitle").textContent=t,document.getElementById("trackAlbum").textContent=i;var d=document.getElementById("trackArtistLink");d.href=a,d.title="Follow "+r+" on Soundcloud";var c=document.getElementById("trackCoverLink");c.href=a,c.title="Follow "+r+" on Soundcloud";var s=document.getElementById("trackArtwork");s.src=n},B=function(){return p};return{initialize:v,changeState:b,getAudioContext:C,setSourceNodeBuffer:L,playAudio:A,stopAudio:T,getFFT:k,setTrackInfo:M,getStates:B}}(window);t.exports=a},{"./LoadSceneState.js":2,"./LoadingState.js":3,"./PlayState.js":4,"./Utils.js":5}],2:[function(e,t,n){var o=function(){"use strict";var t,n,o,a,i,r,l,d,c,s,u,m,f=void 0,p=void 0,v=!1,g=0,y=[],h=!1,S=1,x=0,E=function(t,n){console.log("LoadSceneState::initialize"),f=t,p=n.Utils||e("./Utils.js"),s=new THREE.Vector2(0,0),u=new THREE.Vector3(0,0,0),m={x:0,y:0,vx:0,vy:0},h="ontouchstart"in document||null!=navigator.userAgent.match(/ipad|iphone|android/i),h&&(S=2)},w=function(){console.log("LoadSceneState::enter")},b=function(){console.log("LoadSceneState::execute"),L()},C=function(){console.log("LoadSceneState::exit")},L=function(){t=document.getElementById("container"),o=new THREE.Scene,n=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e3),n.position.z=150,n.lookAt(o.position),c=THREE.ImageUtils.loadTexture("img/19335527-Hair-background-Hair-style-pattern-Vector-illustration-Stock-Vector-resize.jpg",void 0,A),c.wrapS=c.wrapT=THREE.RepeatWrapping,d=new THREE.Texture(I()),d.needsUpdate=!0,d.wrapS=d.wrapT=THREE.RepeatWrapping,B(),o.add(n);try{a=new THREE.WebGLRenderer({antialias:!1,alpha:!0}),a.setClearColor(0,0),a.setSize(window.innerWidth/S,window.innerHeight/S),d.anisotropy=a.getMaxAnisotropy(),S>1&&(a.domElement.style.position="absolute",a.domElement.style.top="0px",a.domElement.style.left="0px",a.domElement.style.webkitTransform="scale3d("+S+", "+S+", 1)",a.domElement.style.webkitTransformOrigin="0 0 0",a.domElement.style.transform="scale3d("+S+", "+S+", 1)",a.domElement.style.transformOrigin="0 0 0"),window.addEventListener("resize",T,!1),document.addEventListener("mousemove",k,!1),document.addEventListener("touchmove",M,!1),t.appendChild(a.domElement),v=!0}catch(e){var i=document.getElementById("info");i&&(i.innerHTML='<p><br /><strong>Note:</strong> You need a modern browser that supports WebGL for this to run the way it is intended.<br />For example. <a href="http://www.google.com/landing/chrome/beta/" target="_blank">Google Chrome 9+</a> or <a href="http://www.mozilla.com/firefox/beta/" target="_blank">Firefox 4+</a>.<br /><br />If you are already using one of those browsers and still see this message, it\'s possible that you<br />have old blacklisted GPU drivers. Try updating the drivers for your graphic card.<br />Or try to set a "--ignore-gpu-blacklist" switch for the browser.</p><CENTER><BR><img src="../general/WebGL_logo.png" border="0"></CENTER>',i.style.display="block")}},A=function(){2===++x&&(f.playAudio(),R())},T=function(e){var t=window.innerWidth,o=window.innerHeight;a.setSize(t/S,o/S),n.aspect=t/o,n.updateProjectionMatrix()},k=function(e){p.preventDefaultEvent(e),s.x=e.clientX/window.innerWidth*2-1,s.y=2*-(e.clientY/window.innerHeight)+1},M=function(e){p.preventDefaultEvent(e),s.x=e.touches[0].clientX/window.innerWidth*2-1,s.y=2*-(e.touches[0].clientY/window.innerHeight)+1},B=function(e){e=new THREE.SphereGeometry(1,32,32);var t=63;e.applyMatrix((new THREE.Matrix4).scale(new THREE.Vector3(t,t,t)));var n=150;h&&(n=45);for(var a=0;n>a;a++){var i={},r={color:{type:"c",value:new THREE.Color(16777215)},hairMap:{type:"t",value:d},colorMap:{type:"t",value:c},offset:{type:"f",value:a/n},globalTime:{type:"f",value:g},gravity:{type:"v3",value:u}},l='uniform float offset;\r\nuniform float globalTime;\r\nuniform vec3 gravity;\r\n\r\nvarying vec2 vUv;\r\nvarying vec3 vNormal;\r\n\r\nconst float spacing = 12.0*1.5;\r\n\r\nvoid main () {\r\n    vec3 displacement   = vec3(0.0, 0.0, 0.0);\r\n    vec3 forceDirection = vec3(0.0, 0.0, 0.0);\r\n\r\n    // "Wind"\r\n    forceDirection.x = sin(globalTime     + position.x*0.05) * 0.2;\r\n    forceDirection.y = cos(globalTime*0.7 + position.y*0.04) * 0.2;\r\n    forceDirection.z = sin(globalTime*0.7 + position.y*0.04) * 0.2;\r\n\r\n    // "Gravity"\r\n    displacement = gravity + forceDirection;\r\n\r\n    float displacementFactor = pow(offset, 3.0);\r\n\r\n    vec3 aNormal = normal;\r\n    aNormal.xyz += displacement*displacementFactor;\r\n\r\n    // Move outwards depending on offset(layer) and add normal+force+gravity\r\n    vec3 animated = vec3(position.x, position.y, position.z) + normalize(aNormal)*offset*spacing;\r\n\r\n    vNormal = normalize(normal*aNormal);\r\n\r\n    vUv = uv*20.0;\r\n\r\n    vec4 mvPosition = modelViewMatrix * vec4(animated, 1.0);\r\n\r\n    gl_Position = projectionMatrix * mvPosition;\r\n}',s="uniform sampler2D hairMap;\r\nuniform sampler2D colorMap;\r\nuniform vec3 color;\r\nuniform float offset;\r\n\r\nvarying vec3 vNormal;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main () {\r\n    vec4 hairColor = texture2D(hairMap, vec2(vUv.s, vUv.t));\r\n    vec4 col = texture2D(colorMap, vec2(vUv.s*0.2, vUv.t*0.2));\r\n\r\n    // Discard no hairs + above the max length\r\n    if (hairColor.a <= 0.0 || hairColor.g < offset) {\r\n        discard;\r\n    }\r\n\r\n    // Darker towards bottom of the hair\r\n    float shadow = mix(0.0, hairColor.b*1.2, offset);\r\n\r\n    // Light\r\n    vec3 light = vec3(0.1, 1.0, 0.3);\r\n    float d = pow(max(0.25, dot(vNormal.xyz, light))*2.75, 1.4) * 5.5;\r\n\r\n    gl_FragColor = vec4(color*col.xyz*d*shadow, 1.1-offset);\r\n}",m=new THREE.ShaderMaterial({uniforms:r,attributes:i,vertexShader:l,fragmentShader:s,transparent:!0}),f=new THREE.Mesh(e,m);f.matrixAutoUpdate=!1,f.frustumCulled=!1,o.add(f),y.push(f)}A()},I=function(){var e=document.createElement("canvas");e.width=256,e.height=256;for(var t=e.getContext("2d"),n=0;2e4>n;++n){var o=[255,Math.floor(p.getRandomArbitrary(0,255)),Math.floor(p.getRandomArbitrary(0,255)),Math.floor(p.getRandomArbitrary(-12,2))];t.fillStyle="rgba("+o.join(",")+")",t.fillRect(Math.random()*e.width,Math.random()*e.height,2,2)}return e},R=function(){requestAnimationFrame(R),j()},j=function(){r=Date.now(),i=r-l,l=r,(isNaN(i)||i>1e3||0==i)&&(i=1e3/60);var e=i/16,t=Math.max(4,20/e),d=(s.x-m.x)/(5*t),c=(s.y-m.y)/(5*t);m.vx+=d,m.vy+=c,m.vx*=.96,m.vy*=.94,m.x+=m.vx,m.y+=m.vy,u.x=2*-(s.x-m.x);var p=f.getFFT();u.y=0;var h=Math.PI*(p[1]-170)/170-Math.PI/2+Math.PI/4,S=Math.PI*p[0]/255-Math.PI/2-Math.PI/4;u.x=Math.sin(h)+Math.PI/4,u.y=Math.sin(S),n.position.x+=(150*Math.sin(s.x)-n.position.x)/t,n.position.z+=(150*Math.cos(s.x)-n.position.z)/t,n.position.y+=(150*Math.sin(s.y)-n.position.y)/t,n.lookAt(o.position),g+=.005*i;for(var x=0;x<y.length;x++)y[x].material.uniforms.globalTime.value=g;v&&a.render(o,n)};return{initialize:E,enter:w,execute:b,exit:C}}();t.exports=o},{"./Utils.js":5}],3:[function(e,t,n){var o=function(){"use strict";var t=void 0,n=void 0,o="client_id=3b2585ef4a5eff04935abe84aad5f3f3",a="https://soundcloud.com/boundarysound/boundary-abidjan",i=function(o,a){console.log("LoadingState::initialize"),t=o,n=a.Utils||e("./Utils.js")},r=function(){console.log("LoadingState::enter")},l=function(){console.log("LoadingState::execute");var e="http://api.soundcloud.com/resolve.json?url="+a+"&"+o;n.ajaxGet(e,function(e){var n=JSON.parse(e),a=n.stream_url+"?"+o;c(a),t.setTrackInfo(n)})},d=function(){console.log("LoadingState::exit")},c=function(e){console.log("LoadingState::_loadAudio");var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e=t.getAudioContext();e.decodeAudioData(n.response,s,u)},n.send(null)},s=function(e){console.log("LoadingState::_playSound"),t.setSourceNodeBuffer(e),console.log(t,t.getStates(),t.getStates().PlayState),t.changeState(t.getStates().PlayState)},u=function(e){console.log(e)};return{initialize:i,enter:r,execute:l,exit:d}}();t.exports=o},{"./Utils.js":5}],4:[function(e,t,n){var o=function(){"use strict";var t=void 0,n=void 0,o=function(o,a){console.log("PlayState::initialize"),t=o,n=a.Utils||e("./Utils.js")},a=function(){console.log("PlayState::enter")},i=function(){console.log("PlayState::execute"),l()},r=function(){console.log("PlayState::exit")},l=function(){var e=document.getElementById("loader");n.removeCSSClass(e,"loading");var o=document.getElementById("playButton");n.removeCSSClass(o,"hidden");var a=document.getElementById("launchExperience");a.addEventListener("click",function(e){n.preventDefaultEvent(e),a.setAttribute("disabled","disabled"),n.addCSSClass(o,"hidden"),ga("send","event","Button","Click","Launch Experience"),t.changeState(t.getStates().LoadSceneState)})};return{initialize:o,enter:a,execute:i,exit:r}}();t.exports=o},{"./Utils.js":5}],5:[function(e,t,n){var o=function(){"use strict";var e=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&"function"==typeof t&&t(n.responseText)},n.open("GET",e,!0),n.send(null)},t=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,t&&"function"==typeof t&&t())}:n.onload=function(){t&&"function"==typeof t&&t()},n.src=e,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)},n=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},o=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},a=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},i=function(e,t){return Math.random()*(t-e)+e},r=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return{ajaxGet:e,asyncLoadScript:t,removeCSSClass:n,addCSSClass:o,getRandomArbitrary:i,getRandomInteger:r,preventDefaultEvent:a}}();t.exports=o},{}],6:[function(e,t,n){"use strict";var o=e("./Application.js");o.initialize()},{"./Application.js":1}]},{},[6]);
//# sourceMappingURL=main.min.js.map