!function e(t,n,o){function a(r,d){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!d&&l)return l(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return a(n?n:e)},c,c.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(e,t,n){var o={trimStart:0,trimEnd:0},a=function(t,n){"use strict";var i=n,r=n,d=n,l=n,s=-1!==t.location.hash.indexOf("#debug"),d=n,c=n,u=n,m=[0,0,0],f=n,p={LoadingState:n,PlayState:n,LoadSceneState:n},g=function(t){t=t||{},f=t.Utils||e("./Utils.js"),p.LoadingState=t.LoadingState||e("./LoadingState.js"),p.PlayState=t.PlayState||e("./PlayState.js"),p.LoadSceneState=t.LoadSceneState||e("./LoadSceneState.js"),s&&E(),v(),y(),h(this),S(),b(p.LoadingState)},v=function(){if(t.AudioContext=t.AudioContext||t.webkitAudioContext||t.mozAudioContext||t.msAudioContext,r=new AudioContext,c=r.createScriptProcessor(2048,1,1),c.connect(r.destination),u=r.createAnalyser(),u.smoothingTimeConstant=.8,u.fftSize=1024,d=r.createBufferSource(),d.connect(u),u.connect(c),d.connect(r.destination),s){var e=document.getElementById("FFTContainer"),n=e.width,a=e.height,i=e.getContext("2d"),l=i.createLinearGradient(0,0,0,a);l.addColorStop(1,"#000000"),l.addColorStop(.75,"#ff0000"),l.addColorStop(.25,"#ffff00"),l.addColorStop(0,"#ffffff")}c.onaudioprocess=function(){var e=new Uint8Array(u.frequencyBinCount);if(u.getByteFrequencyData(e),s){i.clearRect(0,0,n,a),i.fillStyle=l;for(var t=e.length,r=Math.round(n/t),d=0;t>d;d++)d>=o.trimStart&&d<=o.trimEnd&&i.fillRect(d*r,a-e[d],r,a)}m=[e[4],e[194],e[202]]}},y=function(){t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame,t.cancelAnimationFrame=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.msCancelAnimationFrame},h=function(e){p.LoadingState.initialize(e,{Utils:f}),p.PlayState.initialize(e,{Utils:f}),p.LoadSceneState.initialize(e,{Utils:f})},S=function(){var e=document.getElementById("trackCoverLink");e.addEventListener("click",function(e){f.preventDefaultEvent(e),ga("send","event","Button","Click","Album Art")});var t=document.getElementById("trackArtistLink");t.addEventListener("click",function(e){f.preventDefaultEvent(e),ga("send","event","Button","Click","Artist")});var n=document.getElementById("githubLink");n.addEventListener("click",function(e){ga("send","event","Button","Click","GitHub")});var o=document.getElementById("aboutLink");o.addEventListener("click",function(e){f.preventDefaultEvent(e);var t=document.getElementById("aboutModal");f.removeCSSClass(t,"hidden"),ga("send","event","Button","Click","About Modal");var n=document.getElementById("aboutModalClose");n.addEventListener("click",function(e){f.preventDefaultEvent(e),f.addCSSClass(t,"hidden")})})},E=function(){f.asyncLoadScript("https://rawgit.com/mrdoob/stats.js/master/build/stats.min.js",function(){w()}),f.asyncLoadScript("https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js",function(){x()})},x=function(){var e={trackTitle:0,playSound:function(){a.playAudio()},trimStart:0,trimEnd:350};l=new dat.GUI({autoPlace:!1});var t=l.add(e,"trackTitle",{"Double-Edged Sword":0}).name("Track Title");l.add(e,"playSound").name("Play Sound"),l.add(e,"trimStart",0,512,1).onChange(function(e){console.log("Trim Start",e),o.trimStart=e}),l.add(e,"trimEnd",0,512,1).onChange(function(e){console.log("Trim End",e),o.trimEnd=e}),t.onChange(function(e){var t=["https://soundcloud.com/boundarysound/boundary-double-edged-sword"];console.log("Now playing:",t[e])});var n=document.getElementById("GUIContainer");n.appendChild(l.domElement)},w=function(){var e=new Stats;e.setMode(0),e.domElement.style.cssText="position:fixed; left:5px; top:5px; z-index:10000;",document.body.appendChild(e.domElement);var t=new Stats;t.setMode(1),t.domElement.style.cssText="position:fixed; left:85px; top:5px; z-index:10000;",document.body.appendChild(t.domElement);var n=new Stats;n.setMode(2),n.domElement.style.cssText="position:fixed; left:170px; top:5px; z-index:10000;",document.body.appendChild(n.domElement),requestAnimationFrame(function o(){e.update(),t.update(),n.update(),requestAnimationFrame(o)})},b=function(e){i!==e&&(i!==n&&i.exit(),i=e,i!==n&&(i.enter(),i.execute()))},C=function(){return r},L=function(e){d&&(d.buffer&&d.stop(0),d.buffer=e)},T=function(){if(d){var e=document.getElementById("trackInfo");f.removeCSSClass(e,"hidden"),d.start(0)}},A=function(){d&&d.stop(0)},k=function(){return m},M=function(e){var t=e.title,n=e.artwork_url,o=e.permalink_url,a=e.user.permalink_url,i="Self-titled (2013)",r="Boundary",d=o.replace("http://","https://");"https://soundcloud.com/boundarysound/boundary-abidjan"===d?t="Abidjan":"https://soundcloud.com/boundarysound/boundary-double-edged-sword"===d&&(t="Double-Edged Sword"),document.getElementById("trackArtist").textContent=r,document.getElementById("trackTitle").textContent=t,document.getElementById("trackAlbum").textContent=i;var l=document.getElementById("trackArtistLink");l.href=a,l.title="Follow "+r+" on Soundcloud";var s=document.getElementById("trackCoverLink");s.href=a,s.title="Follow "+r+" on Soundcloud";var c=document.getElementById("trackArtwork");c.src=n},I=function(){return p};return{initialize:g,changeState:b,getAudioContext:C,setSourceNodeBuffer:L,playAudio:T,stopAudio:A,getFFT:k,setTrackInfo:M,getStates:I}}(window);t.exports=a},{"./LoadSceneState.js":2,"./LoadingState.js":3,"./PlayState.js":4,"./Utils.js":5}],2:[function(e,t,n){var o=function(){"use strict";var t,n,o,a,i,r,d,l,s,c,u,m,f,p,g=void 0,v=void 0,y=!1,h=0,S=[],E=!1,x=1,b=0,C=function(t,n){console.log("LoadSceneState::initialize"),g=t,v=n.Utils||e("./Utils.js"),m=new THREE.Vector2(0,0),f=new THREE.Vector3(0,0,0),p={x:0,y:0,vx:0,vy:0},E="ontouchstart"in document||null!=navigator.userAgent.match(/ipad|iphone|android/i),E&&(x=2)},L=function(){console.log("LoadSceneState::enter")},T=function(){console.log("LoadSceneState::execute"),k()},A=function(){console.log("LoadSceneState::exit")},k=function(){t=document.getElementById("container"),o=new THREE.Scene,n=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e3),n.position.z=150,n.lookAt(o.position),c=THREE.ImageUtils.loadTexture("img/19335527-Hair-background-Hair-style-pattern-Vector-illustration-Stock-Vector-resize.jpg",void 0,M),c.wrapS=c.wrapT=THREE.RepeatWrapping,s=new THREE.Texture(H()),s.needsUpdate=!0,s.wrapS=s.wrapT=THREE.RepeatWrapping,j(),u=THREE.ImageUtils.loadTexture("img/VignetteWithDirt_alpha_sq.png",void 0,M);var e=new THREE.SpriteMaterial({map:u,useScreenCoordinates:!0,opacity:.4});l=new THREE.Sprite(e),l.scale.set(window.innerWidth/x,window.innerHeight/x,1),l.position.set(window.innerWidth/x/2,window.innerHeight/x/2,0),n.add(l),o.add(n);try{a=new THREE.WebGLRenderer({antialias:!1,alpha:!0}),a.setClearColor(0,0),a.setSize(window.innerWidth/x,window.innerHeight/x),s.anisotropy=a.getMaxAnisotropy(),x>1&&(a.domElement.style.position="absolute",a.domElement.style.top="0px",a.domElement.style.left="0px",a.domElement.style.webkitTransform="scale3d("+x+", "+x+", 1)",a.domElement.style.webkitTransformOrigin="0 0 0",a.domElement.style.transform="scale3d("+x+", "+x+", 1)",a.domElement.style.transformOrigin="0 0 0"),window.addEventListener("resize",I,!1),document.addEventListener("mousemove",R,!1),document.addEventListener("touchmove",B,!1),t.appendChild(a.domElement),y=!0}catch(i){var r=document.getElementById("info");r&&(r.innerHTML='<p><br /><strong>Note:</strong> You need a modern browser that supports WebGL for this to run the way it is intended.<br />For example. <a href="http://www.google.com/landing/chrome/beta/" target="_blank">Google Chrome 9+</a> or <a href="http://www.mozilla.com/firefox/beta/" target="_blank">Firefox 4+</a>.<br /><br />If you are already using one of those browsers and still see this message, it\'s possible that you<br />have old blacklisted GPU drivers. Try updating the drivers for your graphic card.<br />Or try to set a "--ignore-gpu-blacklist" switch for the browser.</p><CENTER><BR><img src="../general/WebGL_logo.png" border="0"></CENTER>',r.style.display="block")}},M=function(){3===++b&&(g.playAudio(),z())},I=function(e){var t=window.innerWidth,o=window.innerHeight;a.setSize(t/x,o/x),n.aspect=t/o,n.updateProjectionMatrix(),l&&(l.scale.set(w/x,o/x,1),l.position.set(t/x/2,o/x/2,0))},R=function(e){v.preventDefaultEvent(e),m.x=e.clientX/window.innerWidth*2-1,m.y=2*-(e.clientY/window.innerHeight)+1},B=function(e){v.preventDefaultEvent(e),m.x=e.touches[0].clientX/window.innerWidth*2-1,m.y=2*-(e.touches[0].clientY/window.innerHeight)+1},j=function(e){e=new THREE.SphereGeometry(1,32,32);var t=63;e.applyMatrix((new THREE.Matrix4).scale(new THREE.Vector3(t,t,t)));var n=150;E&&(n=45);for(var a=0;n>a;a++){var i={},r={color:{type:"c",value:new THREE.Color(16777215)},hairMap:{type:"t",value:s},colorMap:{type:"t",value:c},offset:{type:"f",value:a/n},globalTime:{type:"f",value:h},gravity:{type:"v3",value:f}},d=new THREE.ShaderMaterial({uniforms:r,attributes:i,vertexShader:document.getElementById("vertexshader").textContent,fragmentShader:document.getElementById("fragmentshader").textContent,transparent:!0}),l=new THREE.Mesh(e,d);l.matrixAutoUpdate=!1,l.frustumCulled=!1,o.add(l),S.push(l)}M()},H=function(){var e=document.createElement("canvas");e.width=256,e.height=256;for(var t=e.getContext("2d"),n=0;2e4>n;++n){var o=[255,Math.floor(v.getRandomArbitrary(0,255)),Math.floor(v.getRandomArbitrary(0,255)),Math.floor(v.getRandomArbitrary(-12,2))];t.fillStyle="rgba("+o.join(",")+")",t.fillRect(Math.random()*e.width,Math.random()*e.height,2,2)}return e},z=function(){requestAnimationFrame(z),F()},F=function(){r=Date.now(),i=r-d,d=r,(isNaN(i)||i>1e3||0==i)&&(i=1e3/60);var e=i/16,t=Math.max(4,20/e),l=(m.x-p.x)/(5*t),s=(m.y-p.y)/(5*t);p.vx+=l,p.vy+=s,p.vx*=.96,p.vy*=.94,p.x+=p.vx,p.y+=p.vy,f.x=2*-(m.x-p.x);var c=g.getFFT();f.y=0;var u=Math.PI*(c[1]-170)/170-Math.PI/2+Math.PI/4,v=Math.PI*c[0]/255-Math.PI/2-Math.PI/4;f.x=Math.sin(u)+Math.PI/4,f.y=Math.sin(v),n.position.x+=(150*Math.sin(m.x)-n.position.x)/t,n.position.z+=(150*Math.cos(m.x)-n.position.z)/t,n.position.y+=(150*Math.sin(m.y)-n.position.y)/t,n.lookAt(o.position),h+=.005*i;for(var E=0;E<S.length;E++)S[E].material.uniforms.globalTime.value=h;y&&a.render(o,n)};return{initialize:C,enter:L,execute:T,exit:A}}();t.exports=o},{"./Utils.js":5}],3:[function(e,t,n){var o=function(){"use strict";var t=void 0,n=void 0,o="client_id=3b2585ef4a5eff04935abe84aad5f3f3",a="https://soundcloud.com/boundarysound/boundary-abidjan",i=function(o,a){console.log("LoadingState::initialize"),t=o,n=a.Utils||e("./Utils.js")},r=function(){console.log("LoadingState::enter")},d=function(){console.log("LoadingState::execute");var e="http://api.soundcloud.com/resolve.json?url="+a+"&"+o;n.ajaxGet(e,function(e){var n=JSON.parse(e),a=n.stream_url+"?"+o;s(a),t.setTrackInfo(n)})},l=function(){console.log("LoadingState::exit")},s=function(e){console.log("LoadingState::_loadAudio");var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e=t.getAudioContext();e.decodeAudioData(n.response,c,u)},n.send(null)},c=function(e){console.log("LoadingState::_playSound"),t.setSourceNodeBuffer(e),console.log(t,t.getStates(),t.getStates().PlayState),t.changeState(t.getStates().PlayState)},u=function(e){console.log(e)};return{initialize:i,enter:r,execute:d,exit:l}}();t.exports=o},{"./Utils.js":5}],4:[function(e,t,n){var o=function(){"use strict";var t=void 0,n=void 0,o=function(o,a){console.log("PlayState::initialize"),t=o,n=a.Utils||e("./Utils.js")},a=function(){console.log("PlayState::enter")},i=function(){console.log("PlayState::execute"),d()},r=function(){console.log("PlayState::exit")},d=function(){var e=document.getElementById("loader");n.removeCSSClass(e,"loading");var o=document.getElementById("playButton");n.removeCSSClass(o,"hidden");var a=document.getElementById("launchExperience");a.addEventListener("click",function(e){n.preventDefaultEvent(e),a.setAttribute("disabled","disabled"),n.addCSSClass(o,"hidden"),ga("send","event","Button","Click","Launch Experience"),t.changeState(t.getStates().LoadSceneState)})};return{initialize:o,enter:a,execute:i,exit:r}}();t.exports=o},{"./Utils.js":5}],5:[function(e,t,n){var o=function(){"use strict";var e=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&"function"==typeof t&&t(n.responseText)},n.open("GET",e,!0),n.send(null)},t=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,t&&"function"==typeof t&&t())}:n.onload=function(){t&&"function"==typeof t&&t()},n.src=e,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)},n=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},o=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},a=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},i=function(e,t){return Math.random()*(t-e)+e},r=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return{ajaxGet:e,asyncLoadScript:t,removeCSSClass:n,addCSSClass:o,getRandomArbitrary:i,getRandomInteger:r,preventDefaultEvent:a}}();t.exports=o},{}],6:[function(e,t,n){"use strict";var o=e("./Application.js");o.initialize()},{"./Application.js":1}]},{},[6]);
//# sourceMappingURL=main.min.js.map